survey,var_country,var_year,var_state,var_muni_size,var_rural,var_female,var_age,var_educ,var_indig
amb_mexico_combo,pais == 1,year,"if_else(!is.na(prov), prov - 100, prov1t - 100000)","case_when(estratosec == 1 | between(tamano, 1, 2) | ur1new ==1 ~ ""Grande (más de 100,000)"", estratosec == 2 | between(tamano, 3, 4) | between(ur1new, 3, 4) ~ ""Mediana (entre 25,000 y 100,000)"", estratosec == 3 | tamano == 5 | ur1new == 4  ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))","as.logical(case_when(ur == 2 ~ 1,  ur1new == 4 ~ 1, TRUE ~ 0))","if_else(!is.na(q1), q1 - 1, q1tc_r - 1)","if_else(between(q2, 18, 100), as.numeric(q2), NA_integer_)","case_when(ed == 0 ~ 0, ed < 6 ~ 1, between(ed, 6, 8) ~ 2, between(ed, 9, 11) ~ 3, ed == 12 ~ 4, ed > 12 ~ 5)","case_when(etid == 3 ~ TRUE, mexetid14 == 1 ~ TRUE, TRUE ~ FALSE)"
amb_mexico2021,pais == 1,2021,prov1t - 100000,"case_when(ur1new ==1 ~ ""Grande (más de 100,000)"", between(ur1new, 3, 4) ~ ""Mediana (entre 25,000 y 100,000)"", ur1new == 4  ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",ur1new ==4,q1tb - 1,"if_else(between(q2, 18, 100), as.numeric(q2), NA_integer_)","case_match(edr, 0 ~ 0, 1 ~ 2, 2 ~ 4, 3 ~ 5)",etid == 3
issp2002,country == 38,2003,"case_when(v310 == 1 ~ 2, between(v310, 2, 5) ~ v310 + 2, v310 == 6 ~ 9, between(v310, 7, 12) ~ v310 + 4, between(v310, 13, 14) ~ v310 + 5, v310 == 15 ~ 21, between(v310, 16, 22) ~ v310 + 10)","case_when((between(v343, 1, 2) | (is.na(v343) & v358 == 1)) ~ ""Grande (más de 100,000)"", (between(v343, 3, 4) | (is.na(v343) & between(v358, 2, 3))) ~ ""Mediana (entre 25,000 y 100,000)"", (v343 >= 5 | (is.na(v343) & v358 >= 4)) ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",v358 == 5,v200 - 1,"if_else(between(v201, 18, 100), as.numeric(v201), NA_integer_)","case_when(v224 == 1 ~ 1, between(v224, 2, 3) ~ 2, v224 == 4 ~ 3, between(v224, 5, 6) ~ 4, v224 >= 7 ~ 5)",FALSE
issp2008,v5 == 484,2009,"case_when(mx_reg <= 10 ~ mx_reg, between(mx_reg, 11, 15) ~ mx_reg + 1, between(mx_reg, 16, 18) ~ mx_reg + 2, mx_reg >= 19 ~ mx_reg + 3)","case_when(between(mx_size, 1, 2) ~ ""Grande (más de 100,000)"", between(mx_size, 3, 4) ~ ""Mediana (entre 25,000 y 100,000)"", mx_size >= 5 ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",urbrural >= 4 | mx_size == 8,sex - 1,"if_else(between(age, 18, 100), as.numeric(age), NA_integer_)","case_when(mx_degr == 1 ~ 1, between(mx_degr, 2, 3) ~ 2, mx_degr == 4 ~ 3, between(mx_degr, 5, 6) ~ 4, mx_degr >= 7 ~ 5)",FALSE
issp2012,v4 == 484,2013,mx_reg,"case_when(between(urbrural, 1, 2) ~ ""Grande (más de 100,000)"", urbrural == 3 ~ ""Mediana (entre 25,000 y 100,000)"", urbrural >= 4 ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",urbrural >= 4,"if_else(between(sex, 1, 2), sex - 1, NA_integer_)","if_else(between(age, 18, 100), as.numeric(age), NA_integer_)","case_when(mx_degr == 1 ~ 1, between(mx_degr, 2, 3) ~ 2, mx_degr == 4 ~ 3, between(mx_degr, 5, 6) ~ 4, mx_degr >= 7 ~ 5)",mx_ethn == 1
lb1997,idenpa == 484,1997,"case_when(ciudad == 484201001 ~ 1,  ciudad == 484404001 ~ 4,  ciudad == 484407024 ~ 5,  ciudad == 484206001 ~ 8,  ciudad == 484309019 ~ 9, ciudad == 484211005 ~ 11, ciudad == 484412024 ~ 12, ciudad == 484214029 ~ 14, ciudad == 484315056 ~ 15, ciudad == 484216028 ~ 16, ciudad == 484315046 ~ 17, ciudad == 484218012 ~ 18, ciudad == 484119007 ~ 19, ciudad == 484321010 ~ 21, ciudad == 484222001 ~ 22, ciudad == 484124005 ~ 24, ciudad == 484427015 ~ 27, ciudad == 484329003 ~ 29, ciudad == 484430029 ~ 30, ciudad == 484132006 ~ 32)","case_when(tamciud >= 400 ~ ""Grande (más de 100,000)"", between(tamciud, 200, 300) ~ ""Mediana (entre 25,000 y 100,000)"", tamciud == 100 ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",tamciud == 100,s1 - 1,"if_else(between(s2, 18, 100), as.numeric(s2), NA_integer_)","case_when(between(s6, 6, 11) == 1 ~ 1, between(s6, 12, 14) ~ 2, between(s6, 15, 16) ~ 3, between(s6, 17, 18) ~ 4, s6 >= 18 ~ 5)",FALSE
lb2000,idenpa == 484,2000,10000,"case_when(tamciud >= 7 ~ ""Grande (más de 100,000)"", between(tamciud, 4, 6) ~ ""Mediana (entre 25,000 y 100,000)"", between(tamciud, 1, 3) ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",tamciud == 1,s1 - 1,"if_else(between(s2, 18, 100), as.numeric(s2), NA_integer_)","case_when(s5 == -6 ~ 0, between(s5, 6, 11) == 1 ~ 1, between(s5, 12, 14) ~ 2, between(s5, 15, 16) ~ 3, between(s5, 17, 18) ~ 4, s5 == -7 | s5 >= 18 ~ 5)",FALSE
lb2004,idenpa == 484,2004,comdist,"case_when(tamciud >= 7 ~ ""Grande (más de 100,000)"", between(tamciud, 4, 6) ~ ""Mediana (entre 25,000 y 100,000)"", between(tamciud, 1, 3) ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",tamciud == 1,s1 - 1,"if_else(between(s2, 18, 100), as.numeric(s2), NA_integer_)","case_when(s6 == 1 ~ 0, between(s6, 2, 6) == 1 ~ 1, between(s6, 7, 9) ~ 2, between(s6, 10, 12) ~ 3, s6 == 13 ~ 4, s6 >= 14 ~ 5)",FALSE
lb2006,idenpa == 484,2006,"as.numeric(str_extract(as.character(reg), ""\\d{2}$""))","case_when(tamciud >= 7 ~ ""Grande (más de 100,000)"", between(tamciud, 4, 6) ~ ""Mediana (entre 25,000 y 100,000)"", between(tamciud, 1, 3) ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",tamciud == 1,sexo - 1,"if_else(between(s7, 18, 100), as.numeric(s7), NA_integer_)","case_when(reeduc1 < 4 ~ reeduc1 - 1, reeduc1 == 4 ~ 2, between(reeduc1, 5, 6) ~ 3, reeduc1 == 7 ~ 4)",FALSE
lb2009,idenpa == 484,2009,floor(comdist/10000),"case_when(tamciud >= 7 ~ ""Grande (más de 100,000)"", between(tamciud, 4, 6) ~ ""Mediana (entre 25,000 y 100,000)"", between(tamciud, 1, 3) ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",tamciud == 1,s5 - 1,"if_else(between(s6, 18, 100), as.numeric(s6), NA_integer_)","case_when(reeduc1 == -2 ~ NA_integer_, between(reeduc1, 1, 6) ~ reeduc1 - 1, reeduc1 == 7 ~ 5)",s18 == 3
pew2002,country == 24,2002,"case_when(q94mex == 1 ~ 20030060070010001900240025002600280032, q94mex == 2 ~ 10080011001400150018009001300160017002100220029, q94mex == 3 ~ 4005001200200023002700300031)","case_when(q98mex == 1 ~ ""Grande (más de 100,000)"", q98mex == 2 ~ ""Mediana (entre 25,000 y 100,000)"", q98mex == 3  ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",q98mex == 3,q73 - 1,"if_else(between(q74, 18, 97), as.numeric(q74), NA_integer_)","case_when(q84mex == 1 ~ 0, q84mex == 2 ~ 1, q84mex == 3 ~ 2, q84mex %in% c(4, 6) ~ 3, q84mex %in% c(5, 7, 8) ~ 4, q84mex == 9 ~ 5)",q90 == 68
pew2007,country == 28,2007,"case_when(q130mex == 1 ~ 20030060070010001900240025002600280032, q130mex == 2 ~ 10080011001400150018, q130mex == 3 ~ 9001300160017002100220029, q130mex == 4 ~ 4005001200200023002700300031)","case_when(q134mex == 1 ~ ""Grande (más de 100,000)"", q134mex == 3 ~ ""Mediana (entre 25,000 y 100,000)"", q134mex == 2  ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",q134mex == 2,q107 - 1,"if_else(between(q108, 18, 97), as.numeric(q108), NA_integer_)","case_when(q118mex == 1 ~ 0, q118mex == 2 ~ 1, q118mex == 3 ~ 2, q118mex %in% c(4, 6) ~ 3, q118mex %in% c(5, 7, 8) ~ 4, q118mex == 9 ~ 5)",q125mex == 2
pew2010,country == 14,2010,"case_when(q145mex == 1 ~ 20030060070010001900240025002600280032, q145mex == 2 ~ 10080011001400150018, q145mex == 3 ~ 9001300160017002100220029, q145mex == 4 ~ 4005001200200023002700300031)","case_when(q145mex == 1 ~ ""Grande (más de 100,000)"", q145mex == 3 ~ ""Mediana (entre 25,000 y 100,000)"", q145mex == 2  ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",q145mex == 2,q120 - 1,q121,"case_when(q129mex == 1 ~ 0, q129mex == 2 ~ 1, q129mex == 3 ~ 2, q129mex %in% c(4, 6) ~ 3, q129mex %in% c(5, 7, 8) ~ 4, q129mex == 9 ~ 5)",FALSE
pew2015,country == 21,2015,"case_when(q215mex == 1 & q213mex == 1 ~ 2003006001000250026, q215mex == 1 & q213mex == 2 ~ 140018, q215mex == 2 & q213mex == 1 ~ 70019002400280032, q215mex == 2 & q213mex == 2 ~ 10011, q215mex == 3 & q213mex == 4 ~ 400500200023002700300031, q215mex == 4 & q213mex == 2 ~ 16, q215mex == 4 & q213mex == 3 ~ 900210029, q215mex == 4 & q213mex == 4 ~ 12, q215mex == 5 & q213mex == 2 ~ 80015, q215mex == 5 & q213mex == 3 ~ 130017)","case_when(q219mex == 1 ~ ""Grande (más de 100,000)"", q219mex == 2 ~ ""Mediana (entre 25,000 y 100,000)"", q219mex == 3  ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",q219mex == 2,q145 - 1,"if_else(between(q146, 18, 97), as.numeric(q146), NA_integer_)","case_when(q163mex == 1 ~ 0, q163mex == 2 ~ 1, between(q163mex, 3, 4) ~ 2, q163mex == 5 ~ 3, between(q163mex, 6, 9) ~ 4, between(q163mex, 10, 12) ~ 5)",FALSE
pew2019,country == 14,2019,"case_when(qs5mex == 29000001 ~ 200300600100014001800250026, qs5mex == 29000002 ~ 1007001100190022002400280032, qs5mex == 29000003 ~ 400500200023002700300031, qs5mex == 29000004 ~ 9001200160021002900, qs5mex == 29000005 ~ 8001300150017)","case_when(qs8 == 1 ~ ""Grande (más de 100,000)"", qs8 == 2 ~ ""Mediana (entre 25,000 y 100,000)"", qs8 == 3  ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",qs8 == 3,sex - 1,"if_else(between(age, 18, 97), as.numeric(age), NA_integer_)","case_when(d_educ_mexico_2017 == 1 ~ 0, d_educ_mexico_2017 == 2 ~ 1, between(d_educ_mexico_2017, 3, 4) ~ 2, d_educ_mexico_2017 == 5 ~ 3, between(d_educ_mexico_2017, 6, 9) ~ 4, between(d_educ_mexico_2017, 10, 12) ~ 5)",FALSE
pewrel2014_latam,country == 12,2014,10000,"case_when(q114 == 1 ~ ""Grande (más de 100,000)"", q114 == 2 ~ ""Mediana (entre 25,000 y 100,000)"", q114 == 3  ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",q114 == 2,q73 - 1,"if_else(between(q74, 18, 97), as.numeric(q74), NA_integer_)","case_when(q80mex == 1 ~ 0, q80mex == 2 ~ 1, q80mex == 3 ~ 2, q80mex %in% c(4, 6) ~ 3, q80mex %in% c(5, 7, 8) ~ 4, q80mex == 9 ~ 5)",q83mex == 2
wvs_combo,s003 == 484,s020,"case_when(x048wvs == 484001 ~ 20030060070010001900240025002600280032, x048wvs == 484003 ~ 10080011001400150018009001300160017002100220029, x048wvs == 484004 ~ 4005001200200023002700300031, x048wvs == 484005 ~ 10080011001400150018009001300160017002100220029, TRUE ~ x048wvs - 484100)","case_when(x049 > 6 ~ ""Grande (más de 100,000)"", between(x049, 5, 6) ~ ""Mediana (entre 25,000 y 100,000)"", between(x049, 1, 4)  ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",x049 == 1,x001 - 1,"if_else(between(x003, 18, 100), as.numeric(x003), NA_integer_)","case_when(x025 == 1 | x025a_01 == 0 ~ 1, x025 == 2 | x025a_01 == 1 ~ 2, x025 == 3 | x025 == 5 | x025a_01 == 2 ~ 3, x025 == 4 | x025 == 6 | x025a_01 == 3 ~ 4, x025 >= 7 | x025a_01 >= 4 ~ 5)",x051 == 484005
wvs7,b_country == 484,2018,n_region_wvs - 484100,"case_when(g_townsize > 6 ~ ""Grande (más de 100,000)"", between(g_townsize, 5, 6) ~ ""Mediana (entre 25,000 y 100,000)"", between(g_townsize, 1, 4)  ~ ""Pequeña (menos de 25,000)"") %>% factor(levels = c(""Grande (más de 100,000)"", ""Mediana (entre 25,000 y 100,000)"", ""Pequeña (menos de 25,000)""))",h_urbrural == 2,q260 - 1,"if_else(between(q262, 18, 100), as.numeric(q262), NA_integer_)","case_when(q275 == 0 ~ 1, q275 == 1 ~ 2, q275 == 2 ~ 3, q275 == 3 ~ 4, q275 >= 4 ~ 5)",q290 == 484005